<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Tensorflowè¿›é˜¶ | Iyin's blog</title><meta name="description" content="ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5"><meta name="keywords" content="Deep Learning,Tensorflow"><meta name="author" content="Iyin,yinwein@foxmail.com"><meta name="copyright" content="Iyin"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/plant.png"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Tensorflowè¿›é˜¶"><meta name="twitter:description" content="ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="Tensorflowè¿›é˜¶"><meta property="og:url" content="http://yoursite.com/2020/02/27/2020-02-27-unit5/"><meta property="og:site_name" content="Iyin's blog"><meta property="og:description" content="ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="canonical" href="http://yoursite.com/2020/02/27/2020-02-27-unit5/"><link rel="prev" title="TensorflowåŸºç¡€" href="http://yoursite.com/2020/02/27/2020-02-27-unit4/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:600&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Iyin's blog</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://ae01.alicdn.com/kf/Hb280d3c31450463cb3dc638bf33ca871f.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">11</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">10</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">4</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">ç›®å½•</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#åˆå¹¶ä¸åˆ†å‰²"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">åˆå¹¶ä¸åˆ†å‰²</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ•°æ®ç»Ÿè®¡"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">æ•°æ®ç»Ÿè®¡</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å¡«å……ä¸å¤åˆ¶"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">å¡«å……ä¸å¤åˆ¶</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#æ•°æ®é™å¹…"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">æ•°æ®é™å¹…</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#é«˜çº§æ“ä½œ"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">é«˜çº§æ“ä½œ</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•"><span class="toc-number">1.</span> <span class="toc-text">ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆå¹¶ä¸åˆ†å‰²"><span class="toc-number">1.1.</span> <span class="toc-text">åˆå¹¶ä¸åˆ†å‰²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ•°æ®ç»Ÿè®¡"><span class="toc-number">1.2.</span> <span class="toc-text">æ•°æ®ç»Ÿè®¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¡«å……ä¸å¤åˆ¶"><span class="toc-number">1.3.</span> <span class="toc-text">å¡«å……ä¸å¤åˆ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ•°æ®é™å¹…"><span class="toc-number">1.4.</span> <span class="toc-text">æ•°æ®é™å¹…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é«˜çº§æ“ä½œ"><span class="toc-number">1.5.</span> <span class="toc-text">é«˜çº§æ“ä½œ</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://s2.ax1x.com/2020/02/27/3aTBOx.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Tensorflowè¿›é˜¶</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> å‘è¡¨äº 2020-02-27<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> æ›´æ–°äº 2020-02-27</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h1 id="ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•"><a href="#ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•" class="headerlink" title="ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•"></a>ã€ŠTensorflowæ·±åº¦å­¦ä¹ ã€‹unit5å­¦ä¹ è®°å½•</h1><h2 id="åˆå¹¶ä¸åˆ†å‰²"><a href="#åˆå¹¶ä¸åˆ†å‰²" class="headerlink" title="åˆå¹¶ä¸åˆ†å‰²"></a>åˆå¹¶ä¸åˆ†å‰²</h2><ul>
<li>åˆå¹¶<ul>
<li>æ‹¼æ¥ï¼šåœ¨ç°æœ‰ç»´åº¦ä¸Šåˆå¹¶ã€‚</li>
<li>å †å ï¼šåˆ›å»ºæ–°ç»´åº¦ã€‚</li>
</ul>
</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># æ‹¼æ¥</span></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">a = tf.random.normal([<span class="number">4</span>,<span class="number">35</span>,<span class="number">8</span>]) <span class="comment"># æ¨¡æ‹Ÿæˆç»©å†ŒA</span></span><br><span class="line">b = tf.random.normal([<span class="number">6</span>,<span class="number">35</span>,<span class="number">8</span>]) <span class="comment"># æ¨¡æ‹Ÿæˆç»©å†ŒB</span></span><br><span class="line">tf.concat([a,b],axis=<span class="number">0</span>).shape <span class="comment"># æ‹¼æ¥åˆå¹¶æˆç»©å†Œ</span></span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>TensorShape([10, 35, 8])</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å †å </span></span><br><span class="line">a = tf.random.normal([<span class="number">35</span>,<span class="number">8</span>])</span><br><span class="line">b = tf.random.normal([<span class="number">35</span>,<span class="number">8</span>])</span><br><span class="line">tf.stack([a,b],axis=<span class="number">0</span>).shape <span class="comment"># å †å åˆå¹¶ä¸º2 ä¸ªç­çº§ï¼Œç­çº§ç»´åº¦æ’å…¥åœ¨æœ€å‰</span></span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>TensorShape([2, 35, 8])</code></pre><ul>
<li>åˆ†å‰²<ul>
<li>result = tf.split(x, num_or_size_splits=10, axis=0)</li>
<li>åœ¨æŸä¸ªç»´åº¦ä¸Šå…¨éƒ¨æŒ‰é•¿åº¦ä¸º1çš„æ–¹å¼åˆ†å‰² tf.unstack(x,axis)</li>
</ul>
</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.random.normal([<span class="number">10</span>,<span class="number">35</span>,<span class="number">8</span>])</span><br><span class="line">result = tf.split(x, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">len(result),result[<span class="number">0</span>].shape</span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>(10, TensorShape([1, 35, 8]))</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">result = tf.split(x, num_or_size_splits=[<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>] ,axis=<span class="number">0</span>)</span><br><span class="line">len(result),result[<span class="number">0</span>].shape</span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>(4, TensorShape([4, 35, 8]))</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">result = tf.unstack(x,axis=<span class="number">0</span>) <span class="comment"># Unstack ä¸ºé•¿åº¦ä¸º1 çš„å¼ é‡</span></span><br><span class="line">len(result),result[<span class="number">0</span>].shape <span class="comment">#å°‘äº†è¢«åˆ†å‰²çš„ç»´åº¦</span></span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>(10, TensorShape([35, 8]))</code></pre><h2 id="æ•°æ®ç»Ÿè®¡"><a href="#æ•°æ®ç»Ÿè®¡" class="headerlink" title="æ•°æ®ç»Ÿè®¡"></a>æ•°æ®ç»Ÿè®¡</h2><p>1.<strong>å‘é‡èŒƒæ•°Vector Norm</strong></p>
<ul>
<li><strong>tf.norm(x, ord)</strong></li>
<li>æ¦‚å¿µ<ul>
<li>è¡¨å¾å‘é‡â€œé•¿åº¦â€çš„ä¸€ç§åº¦é‡æ–¹æ³•ï¼Œå¯ä»¥æ¨å¹¿åˆ°å¼ é‡ä¸Šã€‚</li>
<li>å¸¸ç”¨æ¥è¡¨ç¤ºå¼ é‡çš„æƒå€¼å¤§å°ï¼Œæ¢¯åº¦å¤§å°ç­‰ã€‚</li>
</ul>
</li>
<li>å¸¸ç”¨çš„å‘é‡èŒƒæ•°<ul>
<li>L1 èŒƒæ•°ï¼Œord = 1ï¼Œå®šä¹‰ä¸ºå‘é‡ğ’™çš„æ‰€æœ‰å…ƒç´ ç»å¯¹å€¼ä¹‹å’Œ</li>
<li>L2 èŒƒæ•°ï¼Œord = 2ï¼Œå®šä¹‰ä¸ºå‘é‡ğ’™çš„æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œï¼Œå†å¼€æ ¹å·</li>
<li>âˆ âˆ’èŒƒæ•°ï¼Œord = np.infï¼Œå®šä¹‰ä¸ºå‘é‡ğ’™çš„æ‰€æœ‰å…ƒç´ ç»å¯¹å€¼çš„æœ€å¤§å€¼</li>
</ul>
</li>
<li>å¯¹äºçŸ©é˜µå’Œå¼ é‡ï¼ŒåŒæ ·å¯ä»¥åˆ©ç”¨å‘é‡èŒƒæ•°çš„è®¡ç®—å…¬å¼ï¼Œç­‰ä»·äºå°†çŸ©é˜µå’Œå¼ é‡æ‰“å¹³æˆå‘é‡åè®¡ç®—ã€‚</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.ones([<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line">tf.norm(x,ord=<span class="number">2</span>) <span class="comment"># è®¡ç®—L2 èŒƒæ•°</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="129," shape="()," dtype="float32," numpy="2.0"></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">tf.norm(x,ord=np.inf) <span class="comment"># è®¡ç®—âˆèŒƒæ•°</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="133," shape="()," dtype="float32," numpy="1.0"></tf.tensor:></p>
<p>2.<strong>æœ€å€¼ã€å‡å€¼ã€å’Œ</strong></p>
<ul>
<li>tf.reduce_maxã€tf.reduce_minã€tf.reduce_meanã€tf.reduce_sum</li>
<li>å¯ä»¥æ±‚è§£å¼ é‡åœ¨æŸä¸ªç»´åº¦ä¸Šçš„æœ€å¤§ã€æœ€å°ã€å‡å€¼ã€å’Œï¼Œä¹Ÿå¯ä»¥æ±‚å…¨å±€æœ€å¤§ã€æœ€å°ã€å‡å€¼ã€å’Œã€‚</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x =  tf.random.normal([<span class="number">4</span>,<span class="number">10</span>])</span><br><span class="line">tf.reduce_max(x,axis=<span class="number">1</span>) <span class="comment">#ç»´åº¦1ä¸Šçš„æœ€å¤§å€¼</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="144," shape="(4,)," dtype="float32," numpy="array([1.1141267" , 0.42764485, 1.2535464 0.86920667],></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸æŒ‡å®šç»´åº¦ï¼Œæ±‚å…¨å±€</span></span><br><span class="line">tf.reduce_max(x),tf.reduce_min(x),tf.reduce_mean(x)</span><br></pre></td></tr></tbody></table></figure></div>

<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">markdown</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line">(<span class="xml"><span class="tag"><<span class="name">tf.Tensor:</span> <span class="attr">id</span>=<span class="string">146,</span> <span class="attr">shape</span>=<span class="string">(),</span> <span class="attr">dtype</span>=<span class="string">float32,</span> <span class="attr">numpy</span>=<span class="string">1.2535464</span>></span></span>,</span><br><span class="line"> <span class="xml"><span class="tag"><<span class="name">tf.Tensor:</span> <span class="attr">id</span>=<span class="string">148,</span> <span class="attr">shape</span>=<span class="string">(),</span> <span class="attr">dtype</span>=<span class="string">float32,</span> <span class="attr">numpy</span>=<span class="string">-2.0888348</span>></span></span>,</span><br><span class="line"> <span class="xml"><span class="tag"><<span class="name">tf.Tensor:</span> <span class="attr">id</span>=<span class="string">150,</span> <span class="attr">shape</span>=<span class="string">(),</span> <span class="attr">dtype</span>=<span class="string">float32,</span> <span class="attr">numpy</span>=<span class="string">-0.34670228</span>></span></span>)</span><br></pre></td></tr></tbody></table></figure></div>


<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> keras</span><br><span class="line">out = tf.random.normal([<span class="number">4</span>,<span class="number">10</span>]) <span class="comment"># æ¨¡æ‹Ÿç½‘ç»œé¢„æµ‹è¾“å‡º</span></span><br><span class="line">y = tf.constant([<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">0</span>]) <span class="comment"># æ¨¡æ‹ŸçœŸå®æ ‡ç­¾</span></span><br><span class="line">y = tf.one_hot(y,depth=<span class="number">10</span>) <span class="comment"># one-hot ç¼–ç </span></span><br><span class="line">loss = keras.losses.mse(y,out) <span class="comment"># è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„è¯¯å·®</span></span><br><span class="line">loss = tf.reduce_mean(loss) <span class="comment"># å¹³å‡è¯¯å·®ï¼Œåœ¨æ ·æœ¬æ•°ç»´åº¦ä¸Šå–å‡å€¼</span></span><br><span class="line">loss <span class="comment"># è¯¯å·®æ ‡é‡</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="177," shape="()," dtype="float32," numpy="1.1329651"></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># è·å¾—ç´¢å¼•</span></span><br><span class="line">out = tf.random.normal([<span class="number">2</span>,<span class="number">10</span>])</span><br><span class="line">out = tf.nn.softmax(out, axis=<span class="number">1</span>) <span class="comment"># é€šè¿‡softmax å‡½æ•°è½¬æ¢ä¸ºæ¦‚ç‡å€¼</span></span><br><span class="line">pred = tf.argmax(out, axis=<span class="number">1</span>) <span class="comment"># é€‰å–æ¦‚ç‡æœ€å¤§çš„ä½ç½®</span></span><br><span class="line">pred <span class="comment">#ä¸¤ä¸ªæ ·æœ¬çš„æœ€å¤§å€¼åˆ†åˆ«å‡ºç°åœ¨3ã€5ä¸Š</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="216," shape="(2,)," dtype="int64," numpy="array([3," 5],></tf.tensor:></p>
<p>3.å¼ é‡æ¯”è¾ƒ</p>
<ul>
<li>tf.math.greater</li>
<li>tf.math.less</li>
<li>tf.math.greater_equal</li>
<li>tf.math.less_equal</li>
<li>tf.math.note_equal</li>
<li>tf.math.is_nan</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">out = tf.random.normal([<span class="number">100</span>,<span class="number">10</span>])</span><br><span class="line">out = tf.nn.softmax(out, axis=<span class="number">1</span>) <span class="comment"># è¾“å‡ºè½¬æ¢ä¸ºæ¦‚ç‡</span></span><br><span class="line">pred = tf.argmax(out, axis=<span class="number">1</span>) <span class="comment"># è®¡ç®—é¢„æµ‹å€¼</span></span><br><span class="line">pred</span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="234," shape="(100,)," dtype="int64," numpy="<br">array([8, 7, 3, 5, 9, 8, 9, 1, 6, 9, 2, 6, 6, 0, 6, 8, 5, 3, 1, 3, 1, 5,<br>       2, 8, 2, 6, 2, 6, 2, 7, 3, 3, 7, 4, 0, 3, 1, 5, 8, 2, 8, 7, 8, 4,<br>       3, 0, 8, 8, 5, 2, 0, 2, 4, 9, 4, 5, 6, 3, 8, 0, 1, 1, 6, 8, 9, 7,<br>       6, 2, 8, 6, 7, 3, 6, 5, 7, 6, 7, 2, 8, 3, 0, 7, 5, 6, 6, 8, 6, 9,<br>       5, 6, 2, 1, 6, 8, 1, 1, 6, 8, 1, 0], dtype=int64)></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">y = tf.random.uniform([<span class="number">100</span>], dtype = tf.int64, maxval = <span class="number">10</span>) <span class="comment"># ï¼Œæ¨¡æ‹ŸçœŸå®å€¼</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="242," shape="(100,)," dtype="int64," numpy="<br">array([0, 8, 1, 7, 3, 7, 8, 2, 6, 1, 4, 2, 5, 0, 0, 6, 4, 7, 5, 8, 5, 0,<br>       0, 4, 6, 9, 8, 7, 1, 7, 7, 3, 7, 2, 2, 5, 6, 4, 9, 9, 1, 3, 9, 3,<br>       7, 0, 8, 4, 4, 5, 4, 0, 1, 0, 8, 9, 8, 7, 3, 2, 3, 5, 3, 5, 7, 5,<br>       2, 8, 2, 7, 4, 8, 5, 1, 5, 7, 9, 1, 7, 6, 3, 1, 7, 5, 8, 3, 9, 5,<br>       3, 3, 3, 5, 4, 8, 7, 7, 7, 3, 6, 5], dtype=int64)></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">out = tf.equal(pred,y) <span class="comment"># é¢„æµ‹å€¼ä¸çœŸå®å€¼æ¯”è¾ƒï¼Œè¿”å›å¸ƒå°”ç±»å‹çš„å¼ é‡</span></span><br><span class="line">out</span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="257," shape="(100,)," dtype="bool," numpy="<br">array([False, False, False, False, False, False, False, False,  True,<br>       False, False, False, False,  True, False, False, False, False,<br>       False, False, False, False, False, False, False, False, False,<br>       False, False,  True, False,  True,  True, False, False, False,<br>       False, False, False, False, False, False, False, False, False,<br>        True,  True, False, False, False, False, False, False, False,<br>       False, False, False, False, False, False, False, False, False,<br>       False, False, False, False, False, False, False, False, False,<br>       False, False, False, False, False, False, False, False, False,<br>       False, False, False, False, False, False, False, False, False,<br>       False, False, False,  True, False, False, False, False, False,<br>       False])></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">out = tf.cast(out, dtype=tf.float32) <span class="comment"># å¸ƒå°”å‹è½¬int å‹</span></span><br><span class="line">correct = tf.reduce_sum(out) <span class="comment"># ç»Ÿè®¡True çš„ä¸ªæ•°</span></span><br><span class="line">correct.numpy()</span><br></pre></td></tr></tbody></table></figure></div>

<p>8.0</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">accuracy = correct/<span class="number">100</span></span><br><span class="line">accuracy.numpy()</span><br></pre></td></tr></tbody></table></figure></div>

<p>0.08</p>
<h2 id="å¡«å……ä¸å¤åˆ¶"><a href="#å¡«å……ä¸å¤åˆ¶" class="headerlink" title="å¡«å……ä¸å¤åˆ¶"></a>å¡«å……ä¸å¤åˆ¶</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">a = tf.constant([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]) <span class="comment"># ç¬¬ä¸€ä¸ªå¥å­</span></span><br><span class="line">b = tf.constant([<span class="number">7</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">6</span>]) <span class="comment"># ç¬¬äºŒä¸ªå¥å­</span></span><br><span class="line">b = tf.pad(b, [[<span class="number">0</span>,<span class="number">2</span>]]) <span class="comment"># å¥å­æœ«å°¾å¡«å……2 ä¸ª0</span></span><br></pre></td></tr></tbody></table></figure></div>


<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">tf.stack([a,b],axis = <span class="number">0</span>)<span class="comment">#åˆ›å»ºå¥å­ç»´åº¦</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="262," shape="(2," 6), dtype="int32," numpy="<br">array([[1, 2, 3, 4, 5, 6],<br>       [7, 8, 1, 6, 0, 0]])></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">total_words = <span class="number">10000</span> <span class="comment"># è®¾å®šè¯æ±‡é‡å¤§å°</span></span><br><span class="line">max_review_len = <span class="number">80</span> <span class="comment"># æœ€å¤§å¥å­é•¿åº¦</span></span><br><span class="line">embedding_len = <span class="number">100</span> <span class="comment"># è¯å‘é‡é•¿åº¦</span></span><br></pre></td></tr></tbody></table></figure></div>


<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å°†å¥å­å¡«å……æˆ–æˆªæ–­åˆ°ç›¸åŒé•¿åº¦ï¼Œè®¾ç½®ä¸ºæœ«å°¾å¡«å……truncatingå’Œæœ«å°¾æˆªæ–­æ–¹å¼padding</span></span><br><span class="line"><span class="comment"># pre/post</span></span><br><span class="line">(x_train, y_train), (x_test, y_test) = \</span><br><span class="line">keras.datasets.imdb.load_data(num_words=total_words)</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">x_train = \</span><br><span class="line">keras.preprocessing.sequence.pad_sequences \</span><br><span class="line">(x_train, maxlen=max_review_len,truncating=<span class="string">'post'</span>,padding=<span class="string">'post'</span>)</span><br><span class="line"></span><br><span class="line">x_test = \</span><br><span class="line">keras.preprocessing.sequence.pad_sequences \</span><br><span class="line">(x_test, maxlen=max_review_len,truncating=<span class="string">'post'</span>,padding=<span class="string">'post'</span>)</span><br><span class="line"></span><br><span class="line">print(x_train.shape, x_test.shape) <span class="comment"># æ‰“å°ç­‰é•¿çš„å¥å­å¼ é‡å½¢çŠ¶</span></span><br></pre></td></tr></tbody></table></figure></div>

<pre><code>(25000, 80) (25000, 80)</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.random.normal([<span class="number">4</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">1</span>])</span><br><span class="line"><span class="comment"># ç¬¬2ã€3ä¸ªç»´åº¦ï¼Œå·¦å³å„å¡«å……2å•å…ƒ</span></span><br><span class="line"><span class="comment"># tf.pad(x,[[0,0],[2,2],[2,2],[0,0]])</span></span><br></pre></td></tr></tbody></table></figure></div>


<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.random.normal([<span class="number">4</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">3</span>])</span><br><span class="line">tf.tile(x,[<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">1</span>]).shape <span class="comment"># æ•°æ®å¤åˆ¶</span></span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>TensorShape([8, 96, 96, 3])</code></pre><h2 id="æ•°æ®é™å¹…"><a href="#æ•°æ®é™å¹…" class="headerlink" title="æ•°æ®é™å¹…"></a>æ•°æ®é™å¹…</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å®ç°ReLU å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">relu</span><span class="params">(u)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> tf.maximum(x, <span class="number">0.</span>)</span><br></pre></td></tr></tbody></table></figure></div>


<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">tf.minimum(x,<span class="number">7</span>) <span class="comment"># ä¸Šé™å¹…åˆ°7</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="292," shape="(9,)," dtype="int32," numpy="array([0," 1, 2, 3, 4, 5, 6, 7, 7])></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.range(<span class="number">9</span>)</span><br><span class="line"><span class="comment"># tf.minimum(tf.maximum(x,2),7) # é™å¹…ä¸º2~7</span></span><br><span class="line">tf.clip_by_value(x,<span class="number">2</span>,<span class="number">7</span>) <span class="comment"># é™å¹…ä¸º2~7</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="308," shape="(9,)," dtype="int32," numpy="array([2," 2, 3, 4, 5, 6, 7, 7])></tf.tensor:></p>
<h2 id="é«˜çº§æ“ä½œ"><a href="#é«˜çº§æ“ä½œ" class="headerlink" title="é«˜çº§æ“ä½œ"></a>é«˜çº§æ“ä½œ</h2><p>æ ¹æ®ç´¢å¼•å·æ”¶é›†æ•°æ®</p>
<ul>
<li>tf.gather æŒ‡å®šç»´åº¦ï¼Œè·å–å¯¹åº”å…¨éƒ¨æ•°æ®</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.random.uniform([<span class="number">4</span>,<span class="number">35</span>,<span class="number">8</span>],maxval=<span class="number">100</span>,dtype=tf.int32) <span class="comment"># æˆç»©å†Œå¼ é‡</span></span><br><span class="line">tf.gather(x,[<span class="number">0</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">26</span>],axis=<span class="number">0</span>).shape</span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>TensorShape([6, 35, 8])</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment"># x [:2] # åœ¨ç­çº§ç»´åº¦æ”¶é›†ç¬¬1~2 å·ç­çº§æˆç»©å†Œ</span></span><br></pre></td></tr></tbody></table></figure></div>

<ul>
<li>tf.gather_nd æŒ‡å®šæ¯ä¸ªç»´åº¦ï¼Œè·å–å¯¹åº”ç»´åº¦å¯¹åº”ç´¢å¼•æ•°æ®</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># tf.stack([x[1,1],x[2,2],x[3,3]],axis=0)</span></span><br><span class="line">tf.gather_nd(x,[[<span class="number">1</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">3</span>]])</span><br><span class="line"><span class="comment"># tf.gather_nd(x,[[1,1,2],[2,2,3],[3,3,4]])</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="335," shape="(3," 8), dtype="int32," numpy="<br">array([[29, 28, 39, 61, 98, 76, 47, 61],<br>       [75, 61,  1, 40,  4, 55, 92, 15],<br>       [53,  9, 31, 80,  3, 20, 39, 18]])></tf.tensor:></p>
<ul>
<li>tf.boolean_mask é€šè¿‡æ©ç æ–¹å¼é‡‡æ ·</li>
<li>tf.boolean_mask_nd</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">tf.boolean_mask(x,mask=[<span class="literal">True</span>, <span class="literal">False</span>,<span class="literal">False</span>,<span class="literal">True</span>],axis=<span class="number">0</span>).shape</span><br><span class="line"><span class="comment"># æ³¨æ„æ©ç çš„é•¿åº¦å¿…é¡»ä¸å¯¹åº”ç»´åº¦çš„é•¿åº¦ä¸€è‡´</span></span><br></pre></td></tr></tbody></table></figure></div>


<pre><code>TensorShape([2, 35, 8])</code></pre><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.random.uniform([<span class="number">2</span>,<span class="number">3</span>,<span class="number">8</span>],maxval=<span class="number">100</span>,dtype=tf.int32)</span><br><span class="line">tf.boolean_mask(x,[[<span class="literal">True</span>,<span class="literal">True</span>,<span class="literal">False</span>],[<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">True</span>]])</span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="451," shape="(4," 8), dtype="int32," numpy="<br">array([[51, 38, 69, 60, 46, 77, 88,  2],<br>       [45, 36, 97, 58, 42, 10, 77, 28],<br>       [36, 54, 23, 39, 90, 41, 88, 92],<br>       [ 7, 17, 35, 24, 66, 49, 27, 33]])></tf.tensor:></p>
<ul>
<li>tf.where(cond, a, b)æ“ä½œå¯ä»¥æ ¹æ®cond æ¡ä»¶çš„çœŸå‡ä»å‚æ•°ğ‘¨æˆ–ğ‘©ä¸­è¯»å–æ•°æ®</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">a = tf.ones([<span class="number">3</span>,<span class="number">3</span>]) <span class="comment"># æ„é€ a ä¸ºå…¨1 çŸ©é˜µ</span></span><br><span class="line">b = tf.zeros([<span class="number">3</span>,<span class="number">3</span>]) <span class="comment"># æ„é€ b ä¸ºå…¨0 çŸ©é˜µ</span></span><br><span class="line"><span class="comment"># æ„é€ é‡‡æ ·æ¡ä»¶ å…¶ä¸­condğ‘–ä¸ºTrue çš„ä½ç½®ä»ğ‘¨ä¸­å¯¹åº”ä½ç½®æå–å…ƒç´ ï¼Œåä¹‹ä»Bæå–å…ƒç´ </span></span><br><span class="line">cond = \</span><br><span class="line">tf.constant([[<span class="literal">True</span>,<span class="literal">False</span>,<span class="literal">False</span>],[<span class="literal">False</span>,<span class="literal">True</span>,<span class="literal">False</span>],[<span class="literal">True</span>,<span class="literal">True</span>,<span class="literal">False</span>]])</span><br><span class="line">tf.where(cond,a,b) <span class="comment"># æ ¹æ®æ¡ä»¶ä»a,b ä¸­é‡‡æ ·</span></span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="459," shape="(3," 3), dtype="float32," numpy="<br">array([[1., 0., 0.],<br>       [0., 1., 0.],<br>       [1., 1., 0.]], dtype=float32)></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å½“å‚æ•°a=b=Noneæ—¶ï¼Œå³aå’Œbå‚æ•°ä¸æŒ‡å®š</span></span><br><span class="line"><span class="comment"># tf.where ä¼šè¿”å›cond å¼ é‡ä¸­æ‰€æœ‰Trueçš„å…ƒç´ çš„ç´¢å¼•åæ ‡</span></span><br><span class="line"><span class="comment"># æå–å¼ é‡ä¸­æ‰€æœ‰æ­£æ•°æ•°æ®åŠç´¢å¼•</span></span><br><span class="line">x = tf.random.normal([<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line">mask=x><span class="number">0</span> <span class="comment"># æ¯”è¾ƒæ“ä½œï¼Œç­‰åŒäºtf.math.greater()</span></span><br><span class="line">mask</span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="476," shape="(3," 3), dtype="bool," numpy="<br">array([[ True, False, False],<br>       [False, False,  True],<br>       [ True,  True, False]])></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•ä¸€ï¼šé€šè¿‡ç´¢å¼•æå–æ­£æ•°çš„å…ƒç´ å€¼</span></span><br><span class="line">indices=tf.where(mask) <span class="comment"># æå–æ‰€æœ‰å¤§äº0 çš„å…ƒç´ ç´¢å¼•</span></span><br><span class="line">tf.gather_nd(x,indices) </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•äºŒï¼šé€šè¿‡æ©ç æå–æ­£æ•°çš„å…ƒç´ å€¼</span></span><br><span class="line">tf.boolean_mask(x,mask)</span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="478," shape="(4,)," dtype="float32," numpy="array([0.8831726" , 1.112463 1.6572974 0.42189097],></tf.tensor:></p>
<ul>
<li>scatter_ndnd(indices, updates, shape)å‡½æ•°å¯ä»¥é«˜æ•ˆåœ°åˆ·æ–°å¼ é‡çš„éƒ¨åˆ†æ•°æ®</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å‘é‡åˆ·æ–°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„é€ éœ€è¦åˆ·æ–°æ•°æ®çš„ä½ç½®å‚æ•°ï¼Œå³ä¸º4ã€3ã€1 å’Œ7 å·ä½ç½®</span></span><br><span class="line">indices = tf.constant([[<span class="number">4</span>], [<span class="number">3</span>], [<span class="number">1</span>], [<span class="number">7</span>]])</span><br><span class="line"><span class="comment"># æ„é€ éœ€è¦å†™å…¥çš„æ•°æ®ï¼Œ4 å·ä½å†™å…¥4.4,3 å·ä½å†™å…¥3.3ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line">updates = tf.constant([<span class="number">4.4</span>, <span class="number">3.3</span>, <span class="number">1.1</span>, <span class="number">7.7</span>])</span><br><span class="line"><span class="comment"># åœ¨é•¿åº¦ä¸º8 çš„å…¨0 å‘é‡ä¸Šæ ¹æ®indices å†™å…¥updates æ•°æ®</span></span><br><span class="line">tf.scatter_nd(indices, updates, [<span class="number">8</span>])</span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="482," shape="(8,)," dtype="float32," numpy="array([0." , 1.1, 0. 3.3, 4.4, 7.7],></tf.tensor:></p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 3 ç»´å¼ é‡çš„åˆ·æ–°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„é€ å†™å…¥ä½ç½®ï¼Œå³2 ä¸ªä½ç½®</span></span><br><span class="line">indices = tf.constant([[<span class="number">1</span>],[<span class="number">3</span>]])</span><br><span class="line">updates = tf.constant([<span class="comment"># æ„é€ å†™å…¥æ•°æ®ï¼Œå³2 ä¸ªçŸ©é˜µ</span></span><br><span class="line">[[<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>],[<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">7</span>],[<span class="number">8</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">8</span>]],</span><br><span class="line">[[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>]]])</span><br><span class="line"><span class="comment"># åœ¨shape ä¸º[4,4,4]ç™½æ¿ä¸Šæ ¹æ®indices å†™å…¥updates</span></span><br><span class="line">tf.scatter_nd(indices,updates,[<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>])</span><br></pre></td></tr></tbody></table></figure></div>

<p><tf.tensor: id="486," shape="(4," 4, 4), dtype="int32," numpy="<br">array([[[0, 0, 0, 0],<br>        [0, 0, 0, 0],<br>        [0, 0, 0, 0],<br>        [0, 0, 0, 0]],</tf.tensor:></p>
<p>â€‹       [[5, 5, 5, 5],<br>â€‹        [6, 6, 6, 6],<br>â€‹        [7, 7, 7, 7],<br>â€‹        [8, 8, 8, 8]],</p>
<p>â€‹       [[0, 0, 0, 0],<br>â€‹        [0, 0, 0, 0],<br>â€‹        [0, 0, 0, 0],<br>â€‹        [0, 0, 0, 0]],</p>
<p>â€‹       [[1, 1, 1, 1],<br>â€‹        [2, 2, 2, 2],<br>â€‹        [3, 3, 3, 3],<br>â€‹        [4, 4, 4, 4]]])></p>
<ul>
<li>tf.meshgrid å‡½æ•°å¯ä»¥æ–¹ä¾¿åœ°ç”ŸæˆäºŒç»´ç½‘æ ¼çš„é‡‡æ ·ç‚¹åæ ‡ï¼Œæ–¹ä¾¿å¯è§†åŒ–ç­‰åº”ç”¨åœºåˆ</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = tf.linspace(<span class="number">-8.</span>,<span class="number">8</span>,<span class="number">100</span>) <span class="comment"># è®¾ç½®x è½´çš„é‡‡æ ·ç‚¹</span></span><br><span class="line">y = tf.linspace(<span class="number">-8.</span>,<span class="number">8</span>,<span class="number">100</span>) <span class="comment"># è®¾ç½®y è½´çš„é‡‡æ ·ç‚¹</span></span><br><span class="line">x,y = tf.meshgrid(x,y) <span class="comment"># ç”Ÿæˆç½‘æ ¼ç‚¹ï¼Œå¹¶å†…éƒ¨æ‹†åˆ†åè¿”å›</span></span><br><span class="line">x.shape,y.shape <span class="comment"># æ‰“å°æ‹†åˆ†åçš„æ‰€æœ‰ç‚¹çš„x,y åæ ‡å¼ é‡shape</span></span><br><span class="line"></span><br><span class="line">z = tf.sqrt(x**<span class="number">2</span>+y**<span class="number">2</span>)</span><br><span class="line">z = tf.sin(z)/z <span class="comment"># sinc å‡½æ•°å®ç°</span></span><br></pre></td></tr></tbody></table></figure></div>


<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># å¯¼å…¥3D åæ ‡è½´æ”¯æŒ</span></span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = Axes3D(fig) <span class="comment"># è®¾ç½®3D åæ ‡è½´</span></span><br><span class="line"><span class="comment"># æ ¹æ®ç½‘æ ¼ç‚¹ç»˜åˆ¶sinc å‡½æ•°3D æ›²é¢</span></span><br><span class="line">ax.contour3D(x.numpy(), y.numpy(), z.numpy(), <span class="number">50</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure></div>


<p><img alt="png" data-src="https://s2.ax1x.com/2020/02/27/3wiBVS.png" src="/img/loading.gif" class="lazyload"></p>
</body></html></div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Deep-Learning/">Deep Learning    </a><a class="post-meta__tags" href="/tags/Tensorflow/">Tensorflow    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-full"><a href="/2020/02/27/2020-02-27-unit4/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>TensorflowåŸºç¡€</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/03/03/2020-03-03-unit6/" title="ç¥ç»ç½‘ç»œ"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-03</div><div class="relatedPosts_title">ç¥ç»ç½‘ç»œ</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/27/2020-02-27-unit4/" title="TensorflowåŸºç¡€"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-27</div><div class="relatedPosts_title">TensorflowåŸºç¡€</div></div></a></div></div><div class="clear_both"></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Iyin</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script id="canvas_nest" color="189,207,69" opacity="0.9" zIndex="-1" count="70" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>